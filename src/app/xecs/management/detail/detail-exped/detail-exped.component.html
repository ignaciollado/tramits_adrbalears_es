<section ngClass="title-container">
  <h3>{{ 'FORM.EXPEDIENT' | translate }}: {{actualIdExp}}/{{actualConvocatoria}} ({{actualTipoTramite}}) {{actualEmpresa}} - {{actualNif}}</h3>
   <h3>Total solicitudes: {{totalSolicitudesPrevias}}</h3>
</section>

<form [formGroup]="form" ngClass="detalle-formulario">
  <section>
    <button mat-raised-button color="primary" type="submit" (click)="enableEdit()">Editar</button>
    <button mat-raised-button color="accent" (click)="saveExpediente()" [disabled]="!form.valid">Guardar</button>
  </section>
  <mat-tab-group  animationDuration="500ms" mat-stretch-tabs mat-align-tabs="center" dynamicHeight
    [(selectedIndex)]="selectedIndex" (selectedTabChange)="onTabChange($event)">

    <mat-tab><!-- Detalle -->
      <ng-template mat-tab-label>
      <span ngClass="exped-tab detail-tab">{{ 'APP.DETAIL' | translate }}</span>
      </ng-template> 
      <mat-card ngClass="mat-card-detalle">
      <section>
    <mat-form-field appearance="outline">
      <mat-label>{{'FORM.COMPANYNAME' | translate}}</mat-label>
      <input matInput formControlName="empresa" readonly>
    </mat-form-field>
    <mat-form-field appearance="outline">
      <mat-label>NIF</mat-label>
      <input matInput formControlName="nif" readonly minlength="9" maxlength="9">
    </mat-form-field>
    <mat-form-field appearance="outline">
      <mat-label>Fecha solicitud</mat-label>
      <input matInput formControlName="fecha_solicitud" readonly>
    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label>Línea de trámite</mat-label>
      <input matInput formControlName="tipo_tramite" readonly>
    </mat-form-field>
    <mat-form-field appearance="outline">
      <mat-label>Movil a efectos de notificaciones</mat-label>
      <input matInput formControlName="telefono_rep" readonly minlength="9" maxlength="9">
    </mat-form-field>
      <mat-form-field appearance="outline">
      <mat-label>Dirección electrónica a efectos de notificaciones</mat-label>
      <input matInput formControlName="email_rep" readonly>
    </mat-form-field>
    <mat-form-field appearance="outline">
      <mat-label>Domicilio</mat-label>
      <input matInput formControlName="domicilio" readonly>
    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label>Localidad</mat-label>
      <input matInput formControlName="localidad" readonly>
    </mat-form-field>
    <mat-form-field appearance="outline">
      <mat-label>Código postal</mat-label>
      <input matInput formControlName="cpostal" readonly minlength="5" maxlength="5">
    </mat-form-field>
    <mat-form-field appearance="outline">
      <mat-label>Teléfono de contacto</mat-label>
      <input matInput formControlName="telefono" readonly minlength="9" maxlength="9">
    </mat-form-field>
    <mat-form-field appearance="outline">
      <mat-label>Actividad económica (IAE)</mat-label>
      <input matInput formControlName="iae" readonly>
    </mat-form-field>
    <mat-form-field appearance="outline">
      <mat-label>Importe mínimis (€)</mat-label>
      <input matInput formControlName="importe_minimis" [value]="form.get('importe_minimis')?.value | currency:'EUR':'symbol':'1.2-2'" readonly>
    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label>Representante legal</mat-label>
      <input matInput formControlName="nombre_rep" readonly>
    </mat-form-field>
    <section ngClass="autorizaciones"><h4>Autoriza a consultar:</h4>
      <mat-checkbox [checked]="form.get('file_copiaNIF')?.value === 'SI'" disabled>Copia NIF</mat-checkbox>
      <mat-checkbox [checked]="form.get('file_certificadoATIB')?.value === 'SI'" disabled>Certificado ATIB</mat-checkbox>
      <mat-checkbox [checked]="form.get('file_certificadoSegSoc')?.value === 'SI'" disabled>Certificado Seguridad Social</mat-checkbox>
    </section>
    </section>

    <section>
    <mat-form-field appearance="outline">
      <mat-label>Comentarios</mat-label>
      <textarea matInput formControlName="comments" readonly></textarea>
    </mat-form-field>
    <mat-form-field appearance="outline">
      <mat-label>NIF representante legal</mat-label>
      <input matInput formControlName="nif_rep" readonly>
    </mat-form-field>
    <mat-form-field appearance="outline">
      <mat-label>Empresa del consultor</mat-label>
      <input matInput formControlName="empresa_consultor" readonly>
    </mat-form-field>
    <mat-form-field appearance="outline">
      <mat-label>Nombre del consultor</mat-label>
      <input matInput formControlName="nom_consultor" readonly>
    </mat-form-field>
    <mat-form-field appearance="outline">
      <mat-label>Teléfono del consultor</mat-label>
      <input matInput formControlName="tel_consultor" readonly>
    </mat-form-field>
    <mat-form-field appearance="outline">
      <mat-label>Email del consultor</mat-label>
      <input matInput formControlName="mail_consultor" readonly>
    </mat-form-field>
    <mat-form-field appearance="outline">
      <mat-label>Técnico/a asignado/a</mat-label>
      <input matInput formControlName="tecnicoAsignado" readonly>
    </mat-form-field>    
    <mat-form-field appearance="outline">
      <mat-label>Situación</mat-label>
      <mat-select formControlName="situacion" readonly>
        <ng-container *ngFor="let situationGroup of situations">
          <!-- Sin subgrupos -->
           <mat-optgroup *ngIf="!situationGroup.subgroup" [label]="situationGroup.name | translate" style="font-weight: bolder;">
            <mat-option *ngFor="let option of situationGroup.options" [value]="option.value">
              {{option.label | translate}}
            </mat-option>
           </mat-optgroup>
            <!-- Con subgrupos -->
           <ng-container *ngIf="situationGroup.subgroup">
            <mat-optgroup [label]="situationGroup.name | translate" style="font-weight: bolder;">
              <ng-container *ngFor="let subgroup of situationGroup.subgroup">
                <mat-optgroup [label]="subgroup.name | translate" style="color: rgba(28, 4, 245, 0.363);text-decoration: underline;">
                  <mat-option *ngFor="let option of subgroup.options" [value]="option.value">
                    {{option.label | translate}}
                  </mat-option>
                </mat-optgroup>
              </ng-container>
            </mat-optgroup>
           </ng-container>
        </ng-container>
      </mat-select>
      <!-- <input matInput formControlName="situacion" readonly> -->
    </mat-form-field>
    <section ngClass="documentos-en-ADR"><h4>La administración ya dispone de:</h4>
      <mat-checkbox [checked]="form.get('memoriaTecnicaEnIDI')?.value === 'SI'" disabled>Memoria técnica</mat-checkbox>
      <mat-checkbox [checked]="form.get('certificadoIAEEnIDI')?.value === 'SI'" disabled>Certificado IAE</mat-checkbox>
      <mat-checkbox [checked]="form.get('copiaNIFSociedadEnIDI')?.value === 'SI'" disabled>NIF empresa</mat-checkbox>
      <mat-checkbox [checked]="form.get('pJuridicaDocAcreditativaEnIDI')?.value === 'SI'" disabled>Documento acreditativo de representación</mat-checkbox>
    </section>

    <mat-form-field appearance="outline">
      <mat-label>Importe ayuda (€)</mat-label>
      <input matInput formControlName="importeAyuda" [value]="form.get('importeAyuda')?.value | currency:'EUR':'symbol':'1.2-2'" readonly>
    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label>Entidad Bancaria</mat-label>
      <input matInput formControlName="nom_entidad" readonly>
    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label>IBAN</mat-label>
      <input matInput formControlName="cc_datos_bancarios" readonly minlength="25" maxlength="25">
    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label>Fecha de envío a administración</mat-label>
      <input matInput type="date" formControlName="fechaEnvioAdministracion" readonly>
    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label>Fecha de pago</mat-label>
      <input matInput type="date" formControlName="fecha_de_pago" readonly>
    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label>Enviado a pago</mat-label>
      <input matInput formControlName="ordenDePago" readonly>
    </mat-form-field>
    </section>
    <section> 
      <h4>Documentación requerida de la solicitud</h4>

      <app-document [idSol]="idExpediente" [requiredDocs]="'SI'" [nif]="actualNif" [timeStamp]="actualTimeStamp" [convocatoria]="actualConvocatoria"></app-document>
      <h4>Documentación opcional de la solicitud</h4>
      <app-document [idSol]="idExpediente" [requiredDocs]="'NO'"></app-document>
      <app-declaracion-responsable
      [actualID]="actualID" [actualNif]="actualNif"
      [actualConvocatoria]="actualConvocatoria"></app-declaracion-responsable>
    </section>

    </mat-card>
    </mat-tab>

    <mat-tab><!-- Solicitud -->
      <ng-template mat-tab-label>
        <span ngClass="exped-tab solicitud-tab">{{ 'APP.REQUEST' | translate }}</span>
      </ng-template>
      <mat-card ngClass="mat-card-solicitud">
        <section>
        <mat-form-field appearance="outline">
          <mat-label>{{'FORM.FECHA_REC' | translate}}</mat-label>
          <input matInput formControlName="fecha_REC" type="datetime-local" step="1" readonly>
        </mat-form-field>
        <mat-form-field appearance="outline">
        <mat-label>{{'FORM.REF_REC' | translate}}</mat-label>
        <input matInput formControlName="ref_REC" readonly minlength="16" maxlength="16">
        </mat-form-field>
        <mat-form-field appearance="outline">
        <mat-label>{{'FORM.FECHA_REC_ENMIENDA' | translate}}</mat-label>
        <input matInput formControlName="fecha_REC_enmienda" type="datetime-local" step="1" readonly>
        </mat-form-field>
        <mat-form-field appearance="outline">
        <mat-label>{{'FORM.REF_REC_ENMIENDA' | translate}}</mat-label>
        <input matInput formControlName="ref_REC_enmienda" readonly minlength="16" maxlength="16">
        </mat-form-field>
        <mat-form-field appearance="outline">
          <mat-label>{{"FORM.FECHA_REQUERIMIENTO" | translate}}</mat-label>
          <input matInput type="date" formControlName="fecha_requerimiento" readonly>
        </mat-form-field>
        <mat-form-field appearance="outline">
          <mat-label>{{"FORM.FECHA_REQUERIMIENTO_NOTIF" | translate}}</mat-label>
          <input matInput type="date" formControlName="fecha_requerimiento_notif" readonly>      
        </mat-form-field>
        </section>
        <section>
          <h4>{{'ACTOSADMINISTRATIVOS.TITLE' | translate}}</h4>
          <app-requerimiento [actualID]="actualID" [actualIdExp]="actualIdExp" [actualNif]="actualNif" [actualConvocatoria]="actualConvocatoria" [actualTipoTramite]="actualTipoTramite" [actualEmpresa]="actualEmpresa" [motivoRequerimiento] = "motivoRequerimiento"></app-requerimiento>
          <app-resol-desestimiento-no-enmendar [form]="form" [actualID]="actualID" [actualIdExp]="actualIdExp" [actualNif]="actualNif" 
          [actualConvocatoria]="actualConvocatoria" [actualTipoTramite]="actualTipoTramite" [actualEmpresa]="actualEmpresa" 
          [actualImporteSolicitud]="actualImporteSolicitud"></app-resol-desestimiento-no-enmendar>
          <app-mejoras-solicitud-detalle [id_sol]="actualID"></app-mejoras-solicitud-detalle>
        </section>
        <section>
        <h4>Documentos del expediente</h4>
        <app-document [idSol]="idExpediente" [requiredDocs]="'NO'" [faseExped]="'Solicitud'"></app-document>
        </section>
      </mat-card>   
    </mat-tab>

    <mat-tab><!-- Validación -->
      <ng-template mat-tab-label>
        <span ngClass="exped-tab validacion-tab">{{ 'APP.VALIDATION' | translate }}</span>
      </ng-template>
      <mat-card ngClass="mat-card-validacion">
        <section>
        <mat-form-field appearance="outline">
        <mat-label>{{'FORM.fecha_infor_fav_desf' | translate}}</mat-label>
      <input matInput formControlName="fecha_infor_fav_desf" type="date" readonly>
      </mat-form-field>
      <mat-form-field appearance="outline">
      <mat-label>{{'FORM.fecha_firma_propuesta_resolucion_prov' | translate}}</mat-label>
      <input matInput formControlName="fecha_firma_propuesta_resolucion_prov" type="date" readonly>
      </mat-form-field>
      <mat-form-field appearance="outline">
      <mat-label>{{'FORM.fecha_not_propuesta_resolucion_prov' | translate}}</mat-label>
      <input matInput formControlName="fecha_not_propuesta_resolucion_prov" type="date" readonly (change)="changeExpedSituation($event)">
      <mat-radio-group formControlName="propuesta_resolucion_favorable" aria-label="Select an option">
        <mat-radio-button value="1">Favorable</mat-radio-button>
        <mat-radio-button value="0">Desfavorable</mat-radio-button>
      </mat-radio-group>
      </mat-form-field>
      <mat-form-field appearance="outline">
      <mat-label>{{'FORM.fecha_firma_propuesta_resolucion_def' | translate}} [al firmar la PR Definitiva (11 ó 12)]</mat-label>
      <input matInput formControlName="fecha_firma_propuesta_resolucion_def" type="date" readonly>
      </mat-form-field>
      <mat-form-field appearance="outline">
      <mat-label>{{"FORM.fecha_not_propuesta_resolucion_def" | translate}}</mat-label>
      <input matInput formControlName="fecha_not_propuesta_resolucion_def" type="date" readonly>
      </mat-form-field>
      <mat-form-field appearance="outline">
      <mat-label>{{"FORM.fecha_firma_res" | translate}}</mat-label>
      <input matInput formControlName="fecha_firma_res" type="date" readonly>
      </mat-form-field>
      <mat-form-field appearance="outline">
      <mat-label>{{"FORM.fecha_notificacion_resolucion" | translate}}</mat-label>
      <input matInput formControlName="fecha_notificacion_resolucion" type="date" readonly>
      </mat-form-field>
      </section>
      <section>
        <h4>{{'ACTOSADMINISTRATIVOS.TITLE' | translate}}</h4>
        <!-- <mat-accordion> -->
          <app-informe-favorable [form]="form" [actualID]="actualID" [actualEmpresa]="actualEmpresa" [actualIdExp]="actualIdExp" [actualNif]="actualNif" 
          [actualConvocatoria]="actualConvocatoria" [actualImporteSolicitud]="actualImporteSolicitud"
          [actualTipoTramite]="actualTipoTramite"></app-informe-favorable>
          <app-informe-favorable-con-requerimiento [form]="form" [actualID]="actualID" [actualEmpresa]="actualEmpresa" [actualIdExp]="actualIdExp" [actualNif]="actualNif" 
          [actualConvocatoria]="actualConvocatoria" [actualImporteSolicitud]="actualImporteSolicitud"
          [actualTipoTramite]="actualTipoTramite"></app-informe-favorable-con-requerimiento>
          <app-informe-desfavorable [form]="form" [actualID]="actualID" [actualEmpresa]="actualEmpresa" [actualIdExp]="actualIdExp" [actualNif]="actualNif" 
          [actualConvocatoria]="actualConvocatoria" [actualImporteSolicitud]="actualImporteSolicitud"
          [actualTipoTramite]="actualTipoTramite" [motivoDenegacion] = "motivoDenegacion"></app-informe-desfavorable>
          <app-informe-desfavorable-con-requerimiento [form]="form" [actualID]="actualID" [actualEmpresa]="actualEmpresa" [actualIdExp]="actualIdExp" [actualNif]="actualNif" 
          [actualConvocatoria]="actualConvocatoria" [actualImporteSolicitud]="actualImporteSolicitud"
          [actualTipoTramite]="actualTipoTramite" [motivoDenegacion] = "motivoDenegacion"></app-informe-desfavorable-con-requerimiento>
          <app-pr-provisional-favorable [form]="form" [actualID]="actualID" [actualEmpresa]="actualEmpresa" [actualIdExp]="actualIdExp" [actualNif]="actualNif" 
          [actualConvocatoria]="actualConvocatoria" [actualImporteSolicitud]="actualImporteSolicitud"
          [actualTipoTramite]="actualTipoTramite"></app-pr-provisional-favorable>
          <app-pr-provisional-favorable-con-requerimiento [form]="form" [actualID]="actualID" [actualEmpresa]="actualEmpresa" [actualIdExp]="actualIdExp" [actualNif]="actualNif" 
          [actualConvocatoria]="actualConvocatoria" [actualImporteSolicitud]="actualImporteSolicitud"
          [actualTipoTramite]="actualTipoTramite"></app-pr-provisional-favorable-con-requerimiento>
          <app-pr-provisional-desfavorable [form]="form" [actualID]="actualID" [actualEmpresa]="actualEmpresa" [actualIdExp]="actualIdExp" [actualNif]="actualNif" 
          [actualConvocatoria]="actualConvocatoria" [actualImporteSolicitud]="actualImporteSolicitud"
          [actualTipoTramite]="actualTipoTramite" [motivoDenegacion] = "motivoDenegacion"></app-pr-provisional-desfavorable>
          <app-pr-provisional-desfavorable-con-requerimiento [form]="form" [actualID]="actualID" [actualEmpresa]="actualEmpresa" [actualIdExp]="actualIdExp" [actualNif]="actualNif" 
          [actualConvocatoria]="actualConvocatoria" [actualImporteSolicitud]="actualImporteSolicitud"
          [actualTipoTramite]="actualTipoTramite" [motivoDenegacion] = "motivoDenegacion"></app-pr-provisional-desfavorable-con-requerimiento>
          
          <app-pr-definitiva-favorable [form]="form" [actualID]="actualID" [actualEmpresa]="actualEmpresa" [actualIdExp]="actualIdExp" [actualNif]="actualNif" 
          [actualConvocatoria]="actualConvocatoria" [actualImporteSolicitud]="actualImporteSolicitud"
          [actualTipoTramite]="actualTipoTramite"></app-pr-definitiva-favorable>

          <app-pr-definitiva-favorable-con-requerimiento [form]="form" [actualID]="actualID" [actualEmpresa]="actualEmpresa" [actualIdExp]="actualIdExp" [actualNif]="actualNif" 
          [actualConvocatoria]="actualConvocatoria" [actualImporteSolicitud]="actualImporteSolicitud"
          [actualTipoTramite]="actualTipoTramite"></app-pr-definitiva-favorable-con-requerimiento>

          <app-pr-definitiva-desfavorable [form]="form" [actualID]="actualID" [actualEmpresa]="actualEmpresa" [actualIdExp]="actualIdExp" [actualNif]="actualNif" 
          [actualConvocatoria]="actualConvocatoria" [actualImporteSolicitud]="actualImporteSolicitud"
          [actualTipoTramite]="actualTipoTramite" [motivoDenegacion] = "motivoDenegacion"></app-pr-definitiva-desfavorable>
          <app-pr-definitiva-desfavorable-con-requerimiento [form]="form" [actualID]="actualID" [actualEmpresa]="actualEmpresa" [actualIdExp]="actualIdExp" [actualNif]="actualNif" 
          [actualConvocatoria]="actualConvocatoria" [actualImporteSolicitud]="actualImporteSolicitud"
          [actualTipoTramite]="actualTipoTramite" [motivoDenegacion] = "motivoDenegacion"></app-pr-definitiva-desfavorable-con-requerimiento>
          <app-resol-concesion-favorable [form]="form" [actualID]="actualID" [actualEmpresa]="actualEmpresa" [actualIdExp]="actualIdExp" [actualNif]="actualNif" 
          [actualConvocatoria]="actualConvocatoria" [actualImporteSolicitud]="actualImporteSolicitud"
          [actualTipoTramite]="actualTipoTramite" [motivoDenegacion] = "motivoDenegacion"></app-resol-concesion-favorable>
          <app-resol-concesion-favorable-con-requerimiento [form]="form" [actualID]="actualID" [actualEmpresa]="actualEmpresa" [actualIdExp]="actualIdExp" [actualNif]="actualNif" 
          [actualConvocatoria]="actualConvocatoria" [actualImporteSolicitud]="actualImporteSolicitud"
          [actualTipoTramite]="actualTipoTramite" [motivoDenegacion] = "motivoDenegacion"></app-resol-concesion-favorable-con-requerimiento>
          <app-resol-denegacion [form]="form" [actualID]="actualID" [actualEmpresa]="actualEmpresa" [actualIdExp]="actualIdExp" [actualNif]="actualNif" 
          [actualConvocatoria]="actualConvocatoria" [actualImporteSolicitud]="actualImporteSolicitud"
          [actualTipoTramite]="actualTipoTramite" [motivoDenegacion] = "motivoDenegacion"></app-resol-denegacion>
          <app-resol-denegacion-con-requerimiento [form]="form" [actualID]="actualID" [actualEmpresa]="actualEmpresa" [actualIdExp]="actualIdExp" [actualNif]="actualNif" 
          [actualConvocatoria]="actualConvocatoria" [actualImporteSolicitud]="actualImporteSolicitud"
          [actualTipoTramite]="actualTipoTramite" [motivoDenegacion] = "motivoDenegacion"></app-resol-denegacion-con-requerimiento>
      </section>
      <section>
        <h4>Documentos del expediente</h4>
        <app-document [idSol]="idExpediente" [requiredDocs]="'NO'" [faseExped]="'Validacion'"></app-document>
      </section>
    </mat-card>
    </mat-tab>

    <mat-tab><!-- ejecución -->
      <ng-template mat-tab-label>
        <span ngClass="exped-tab ejecucion-tab">{{ 'APP.EXECUTION' | translate }}</span>
      </ng-template>
      <mat-card ngClass="mat-card-ejecucion">
      <section>
      <mat-form-field appearance="outline">
      <mat-label>{{'FORM.fecha_kick_off' | translate}}</mat-label>
      <input matInput formControlName="fecha_kick_off" type="date" readonly>
      </mat-form-field>
      <mat-form-field appearance="outline">
      <mat-label>{{'FORM.fecha_limite_consultoria' | translate}}</mat-label>
      <input matInput formControlName="fecha_limite_consultoria" type="date" readonly>
      </mat-form-field>
      <mat-form-field appearance="outline">
      <mat-label>{{'FORM.fecha_reunion_cierre' | translate}}</mat-label>
      <input matInput formControlName="fecha_reunion_cierre" type="date" readonly>
      </mat-form-field>
      <mat-form-field appearance="outline">
      <mat-label>{{'FORM.fecha_limite_justificacion' | translate}}</mat-label>
      <input matInput formControlName="fecha_limite_justificacion" type="date" readonly>
      </mat-form-field>
      <mat-form-field appearance="outline">
      <mat-label>{{"FORM.fecha_max_desp_ampliacion" | translate}}</mat-label>
      <input matInput formControlName="fecha_max_desp_ampliacion" type="date" readonly>
      </mat-form-field>
      <mat-form-field appearance="outline">
      <mat-label>{{"FORM.fecha_REC_amp_termino" | translate}}</mat-label>
      <input matInput formControlName="fecha_REC_amp_termino" type="datetime-local" step="1" readonly>
      </mat-form-field>
      <mat-form-field appearance="outline">
      <mat-label>{{"FORM.ref_REC_amp_termino" | translate}}</mat-label>
      <input matInput formControlName="ref_REC_amp_termino" readonly [minlength]="16" [maxLength]="16">
      </mat-form-field>
      <mat-form-field appearance="outline">
      <mat-label>{{"FORM.fecha_amp_termino" | translate}}</mat-label>
      <input matInput formControlName="fecha_amp_termino" type="date" readonly>
      </mat-form-field>      
      </section>
      <section>
        <h4>{{'ACTOSADMINISTRATIVOS.TITLE' | translate}}</h4>
        <app-acta-de-kick-off [form]="form" [actualID]="actualID" [actualEmpresa]="actualEmpresa" [actualIdExp]="actualIdExp" [actualNif]="actualNif" 
        [actualConvocatoria]="actualConvocatoria"[actualTipoTramite]="actualTipoTramite"></app-acta-de-kick-off>
        <app-acta-de-cierre [form]="form" [actualID]="actualID" [actualEmpresa]="actualEmpresa" [actualIdExp]="actualIdExp" [actualNif]="actualNif" 
        [actualConvocatoria]="actualConvocatoria" [actualTipoTramite]="actualTipoTramite" [justificationSendedMail] = "justificationSendedMail"></app-acta-de-cierre>
      </section>
      <section>
        <h4>Documentos del expediente</h4>
        <app-document [idSol]="idExpediente" [requiredDocs]="'NO'" [faseExped]="'Ejecucion'"></app-document>
      </section>
      </mat-card>  
    </mat-tab>

    <mat-tab><!-- justificación -->
    <ng-template mat-tab-label>
      <span ngClass="exped-tab justificacion-tab">{{ 'APP.JUSTIFICATION' | translate }}</span>
    </ng-template>
    <mat-card>
    <section>
      <mat-form-field appearance="outline">
        <mat-label>{{'FORM.FECHA_REC_JUSTIFICACION' | translate}}</mat-label>
        <input matInput formControlName="fecha_REC_justificacion" type="datetime-local" step="1" readonly>
      </mat-form-field>
      <mat-form-field appearance="outline">
        <mat-label>{{'FORM.REF_REC_JUSTIFICACION' | translate}}</mat-label>
        <input matInput formControlName="ref_REC_justificacion" readonly [minLength]="16" [maxLength]="16">
      </mat-form-field>
      <mat-form-field appearance="outline">
        <mat-label>{{'FORM.FECHA_FIRMA_RES_PAGO_JUST' | translate}}</mat-label>
        <input matInput formControlName="fecha_firma_res_pago_just" type="date" readonly>
      </mat-form-field>
      <mat-form-field appearance="outline">
        <mat-label>{{'FORM.FECHA_NOT_RES_PAGO' | translate}}</mat-label>
        <input matInput formControlName="fecha_not_res_pago" type="date" readonly>
      </mat-form-field>
      <mat-form-field appearance="outline">
        <mat-label>{{"FORM.FECHA_FIRMA_REQUERIMIENTO_JUSTIFICACION" | translate}}</mat-label>
        <input matInput formControlName="fecha_firma_requerimiento_justificacion" type="date" readonly>
      </mat-form-field>
      <mat-form-field appearance="outline">
        <mat-label>{{"FORM.FECHA_NOT_REQ_JUST" | translate}}</mat-label>
        <input matInput formControlName="fecha_not_req_just" type="date" readonly>
      </mat-form-field>
      <mat-form-field appearance="outline">
        <mat-label>{{"FORM.FECHA_REC_REQUERIMIENTO_JUSTIFICACION" | translate}}</mat-label>
        <input matInput formControlName="fecha_REC_requerimiento_justificacion" type="datetime-local" step="1" readonly="">
      </mat-form-field>
      <mat-form-field appearance="outline">
        <mat-label>{{"FORM.REF_REC_REQUERIMIENTO_JUSTIFICACION" | translate}}</mat-label>
        <input matInput formControlName="ref_REC_requerimiento_justificacion" readonly [minLength]="16" [maxLength]="16">
      </mat-form-field>
      <mat-form-field appearance="outline">
        <mat-label>{{"FORM.FECHA_PROPUESTA_REV" | translate}}</mat-label>
        <input matInput formControlName="fecha_propuesta_rev" type="date" readonly>
      </mat-form-field>
      <mat-form-field appearance="outline">
        <mat-label>{{"FORM.FECHA_RESOLUCION_REV" | translate}}</mat-label>
        <input matInput formControlName="fecha_resolucion_rev" type="date" readonly>
      </mat-form-field>      
    </section>
    <section>
      <h4>{{'ACTOSADMINISTRATIVOS.TITLE' | translate}}</h4>
      <app-resol-de-pago [form]="form" [actualID]="actualID" [actualEmpresa]="actualEmpresa" [actualIdExp]="actualIdExp" [actualNif]="actualNif" 
      [actualConvocatoria]="actualConvocatoria"[actualTipoTramite]="actualTipoTramite"></app-resol-de-pago>
      <ol start="21">
        <li>Informe inici requeriment justificació (Pendent crear plantilla json)</li>
        <li>Requeriment d'esmena justificació (Pendent crear plantilla json)</li>
        <li>Informe post esmena justificació (Pendent crear plantilla json)</li>
      </ol>
    </section>
    <section>
      <h4>Documentos del expediente</h4>
      <app-document [idSol]="idExpediente" [requiredDocs]="'NO'" [faseExped]="'Justificacion'"></app-document>
    </section>
    </mat-card>  
    </mat-tab>

    <mat-tab><!-- Desestimiento o renuncia -->
    <ng-template mat-tab-label>
      <span ngClass="exped-tab desestimiento-tab">{{ 'APP.DISCLAIMER' | translate }}</span>
    </ng-template>    
    <mat-card>
      <section>
      <mat-form-field appearance="outline">
        <mat-label>{{'FORM.FECHA_REC_DESESTIMIENTO' | translate}}</mat-label>
        <input matInput formControlName="fecha_REC_desestimiento" type="datetime-local" step="1" readonly>
      </mat-form-field>
      <mat-form-field appearance="outline">
        <mat-label>{{'FORM.REF_REC_DESESTIMIENTO' | translate}}</mat-label>
        <input matInput formControlName="ref_REC_desestimiento" readonly [minLength]="16" [maxLength]="16">
      </mat-form-field>
      <mat-form-field appearance="outline">
        <mat-label>{{'FORM.FECHA_FIRMA_RESOLUCION_DESESTIMIENTO' | translate}}</mat-label>
        <input matInput formControlName="fecha_firma_resolucion_desestimiento" type="date" readonly>
      </mat-form-field>
      <mat-form-field appearance="outline">
        <mat-label>{{'FORM.FECHA_NOTIFICACION_DESESTIMIENTO' | translate}}</mat-label>
        <input matInput formControlName="fecha_notificacion_desestimiento" type="date" readonly>
      </mat-form-field>
      </section>
      <section>
        <h4>{{'ACTOSADMINISTRATIVOS.TITLE' | translate}}</h4>
        <app-resol-desestimiento-por-renuncia [form]="form" [actualID]="actualID" [actualEmpresa]="actualEmpresa" [actualIdExp]="actualIdExp" [actualNif]="actualNif" 
        [actualConvocatoria]="actualConvocatoria"[actualTipoTramite]="actualTipoTramite" [motivoDesestimientoRenuncia]="motivoDesestimientoRenuncia"></app-resol-desestimiento-por-renuncia>

        <ol start="26">
          <li>Proposta resolució revocació per no justificar (Pendent crear plantilla json)</li>
          <li>Resolució revocació per no justificar</li>
        </ol>
      </section>
      <section>
        <h4>Documentos del expediente</h4>
        <app-document [idSol]="idExpediente" [requiredDocs]="'NO'" [faseExped]="'Desestimiento'"></app-document>
      </section>         
    </mat-card>
    </mat-tab>
  </mat-tab-group>
</form>