<form [formGroup]="form" ngClass="detalle-formulario">
    <mat-tab-group mat-stretch-tabs>
        <mat-tab>
            <ng-template mat-tab-label>
                <span ngClass="exped-tab general-tab">{{'APP.GENERAL' | translate}}</span>
            </ng-template>
            <mat-card ngClass="mat-card-general">
                <section>
                    <h3>Total solicitudes previas: {{totalSolicitudesPrevias}}</h3>
                    <mat-form-field appearance="outline">
                        <mat-label>{{'FORM.SOLICITOR' | translate}}</mat-label>
                        <input matInput type="text" formControlName="empresa" [readonly]="!isEditing">
                    </mat-form-field>
                    <mat-form-field appearance="outline">
                        <mat-label *ngIf="businessType === 'autonomo'">{{'FORM.NIF' | translate}}</mat-label>
                        <mat-label *ngIf="businessType !== 'autonomo'">{{'FORM.CIF' | translate}}</mat-label>
                        <input matInput type="text" formControlName="nif" readonly>
                    </mat-form-field>
                    <mat-form-field appearance="outline">
                        <mat-label>{{'FORM.REQUESTDATE' | translate}}</mat-label>
                        <input matInput type="datetime-local" step="1" formControlName="fecha_solicitud" readonly>
                    </mat-form-field>
                    <mat-form-field appearance="outline">
                        <mat-label>{{'FORM.PROCESSLINE' | translate}}</mat-label>
                        <input matInput type="text" formControlName="tipo_tramite" readonly>
                    </mat-form-field>
                    <mat-form-field appearance="outline">
                        <mat-label>{{'FORM.NOTIFICATIONMOBILE' | translate}}</mat-label>
                        <input matInput type="tel" formControlName="telefono_rep" [readonly]="!isEditing">
                    </mat-form-field>
                    <mat-form-field appearance="outline">
                        <mat-label>{{'FORM.NOTIFICATIONMAIL' | translate}}</mat-label>
                        <input matInput type="tel" formControlName="email_rep" [readonly]="!isEditing">
                    </mat-form-field>
                    <mat-form-field appearance="outline">
                        <mat-label>{{'FORM.ADDRESS' | translate}}</mat-label>
                        <input matInput type="text" formControlName="domicilio" [readonly]="!isEditing">
                    </mat-form-field>
                    <mat-form-field appearance="outline">
                        <mat-label>{{'FORM.TOWN' | translate}}</mat-label>
                        <input matInput type="text" formControlName="localidad" [readonly]="!isEditing">
                    </mat-form-field>
                </section>
                <section>
                    <mat-form-field appearance="outline">
                        <mat-label>{{'FORM.ZIPCODE' | translate}}</mat-label>
                        <input matInput type=text formControlName="cpostal" [readonly]="!isEditing">
                    </mat-form-field>
                    <mat-form-field appearance="outline">
                        <mat-label>{{'FORM.CONTACTPHONE' | translate}}</mat-label>
                        <input matInput type="tel" formControlName="telefono" [readonly]="!isEditing">
                    </mat-form-field>
                    <mat-form-field appearance="outline">
                        <mat-label>{{'FORM.CNAE' | translate}}</mat-label>
                        <input matInput type="text" formControlName="iae" [readonly]="!isEditing">
                    </mat-form-field>
                    <mat-form-field appearance="outline">
                        <mat-label>{{'FORM.NOMREPRESENTANTE' | translate}}</mat-label>
                        <input matInput type=text formControlName="nombre_rep" [readonly]="!isEditing">
                    </mat-form-field>
                    <mat-form-field appearance="outline">
                        <mat-label>{{'FORM.NIFREPRESENTANTE' | translate}}</mat-label>
                        <input matInput type="text" formControlName="nif_rep" [readonly]="!isEditing">
                    </mat-form-field>
                    <mat-form-field appearance="outline">
                        <mat-label>{{'ISBA.PHONEREPRESENTANTE' | translate}}</mat-label>
                        <input matInput type="tel" formControlName="telefono_contacto_rep" [readonly]="!isEditing">
                    </mat-form-field>
                    <section ngClass="autorizaciones">
                        <h4>Autoriza a consultar:</h4>
                        <mat-checkbox [checked]="form.get('file_copiaNIF')?.value === 'SI'" disabled>Copia NIF</mat-checkbox>
                        <mat-checkbox [checked]="form.get('file_certificadoATIB')?.value === 'SI'" disabled>Certificado ATIB</mat-checkbox>
                        <mat-checkbox [checked]="form.get('file_certificadoSegSoc')?.value === 'SI'" disabled>Certificado Seguridad Social</mat-checkbox>
                    </section>
                </section>
                <section>
                    <mat-form-field appearance="outline" floatLabel="always">
                        <mat-label>{{'FORM.COMMENTS' | translate}}</mat-label>
                        <textarea matInput formControlName="comments" [readonly]="!isEditing" placeholder="{{'FORM.COMMENTS-PLACEHOLDER' | translate}}"></textarea>
                    </mat-form-field>
                    <section ngClass="radio-input">
                        <mat-label><strong>{{'ISBA.PROJECTINILS' | translate}}</strong></mat-label>
                        <mat-radio-group formControlName="empresa_eco_idi_isba" [disabled]="!isEditing">
                            <mat-radio-button value="SI">{{'APP.YES' | translate}}</mat-radio-button>
                            <mat-radio-button value="NO">{{'APP.NO' | translate}}</mat-radio-button>
                        </mat-radio-group>
                    </section>
                    <mat-form-field appearance="outline">
                        <mat-label>{{'ISBA.PROJECTPURPOSE' | translate}}</mat-label>
                        <input matInput type="text" formControlName="finalidad_inversion_idi_isba" [readonly]="!isEditing">
                    </mat-form-field>
                    <mat-form-field appearance="outline">
                        <mat-label>{{'ISBA.ENTITYNAME' | translate}}</mat-label>
                        <input matInput type="text" formControlName="nom_entidad" [readonly]="!isEditing">
                    </mat-form-field>
                    <mat-form-field appearance="outline">
                        <mat-label>{{'ISBA.TRANSACTIONAMOUNT' | translate}}</mat-label>
                        <input matInput type="decimal" formControlName="importe_prestamo" [readonly]="!isEditing">
                    </mat-form-field>
                    <mat-form-field appearance="outline">
                        <mat-label>{{'ISBA.LOANTERM' | translate}}</mat-label>
                        <input matInput type="text" formControlName="plazo_prestamo" [readonly]="!isEditing">
                    </mat-form-field>
                    <mat-form-field appearance="outline">
                        <mat-label>{{'ISBA.AVALAMOUNT' | translate}}</mat-label>
                        <input matInput type="decimal" formControlName="cuantia_aval_idi_isba" [readonly]="!isEditing">
                    </mat-form-field>
                    <mat-form-field appearance="outline">
                        <mat-label>{{'ISBA.AVALTERM' | translate}}</mat-label>
                        <input matInput type="text" formControlName="plazo_aval_idi_isba" [readonly]="!isEditing">
                    </mat-form-field>
                    <mat-form-field appearance="outline">
                        <mat-label>{{'ISBA.FORMALIZATIONDATE' | translate}}</mat-label>
                        <input matInput type="date" formControlName="fecha_aval_idi_isba" [readonly]="!isEditing">
                    </mat-form-field>
                    <mat-form-field appearance="outline">
                        <mat-label>{{'ISBA.REQUEST' | translate}}</mat-label>
                        <input matInput type="decimal" formControlName="importe_ayuda_solicita_idi_isba" [readonly]="!isEditing">
                    </mat-form-field>
                    <section>
                        <h4>{{'ISBA.BUDGETAMOUNTDETAILS' | translate}}</h4>
                        <mat-form-field appearance="outline">
                            <mat-label>{{'ISBA.INTERESTSUBSIDY' | translate}}</mat-label>
                            <input matInput type="decimal" formControlName="intereses_ayuda_solicita_idi_isba" [readonly]="!isEditing">
                        </mat-form-field>
                        <mat-form-field appearance="outline">
                            <mat-label>{{'ISBA.COSTSUBSIDY' | translate}}</mat-label>
                            <input matInput type="decimal" formControlName="coste_aval_solicita_idi_isba" [readonly]="!isEditing">
                        </mat-form-field>
                        <mat-form-field appearance="outline">
                            <mat-label>{{'ISBA.STARTSTUDYSUBSIDY' | translate}}</mat-label>
                            <input matInput type="decimal" formControlName="gastos_aval_solicita_idi_isba" [readonly]="!isEditing">
                        </mat-form-field>
                    </section>
                    <mat-form-field appearance="outline">
                        <mat-label>{{'ISBA.DECLARATION5NO' | translate}}</mat-label>
                        <input matInput type="text" formControlName="ayudasSubvenSICuales_dec_resp" [readonly]="!isEditing">
                    </mat-form-field>
                    <mat-form-field appearance="outline">
                        <mat-label>{{'FORM.ASSIGNEDTECHNICIAN' | translate}}</mat-label>
                        <input matInput type="text" formControlName="tecnicoAsignado" [readonly]="!isEditing">
                    </mat-form-field>
                    <mat-form-field appearance="outline">
                        <mat-label>{{'FORM.SITUATION' | translate}}</mat-label>
                        <input matInput type="text" formControlName="situacion" [readonly]="!isEditing">
                    </mat-form-field>
                </section>
                <section>
                    <h4 [innerHTML]="'FORM.REQUIREDDOCUMENTATIONDETAILS' | translate"></h4>
                    <app-document [idSol]="idExpediente" [requiredDocs]="'SI'"></app-document>
                    <section *ngIf="signedDocData">
                        <div *ngIf="signedDocData.status === 'COMPLETED'">
                            <button mat-raised-button color="accent"
                                (click)="showSignedDocument(publicAccessId)">{{'FORM.SIGNEDDOCUMENT' |
                                translate}}</button>
                        </div>
                        <div *ngIf="signedDocData.status === 'REJECTED'">
                            <button mat-raised-button color="warn">{{'FORM.SIGNREJECTEDDOCUMENT' | translate}}</button>
                        </div>
                        <div *ngIf="signedDocData.status === 'NOT_STARTED'">
                            <button mat-raised-button color="warn">{{'FORM.SIGNPENDINGDOCUMENT' | translate}}</button>
                        </div>
                        <div *ngIf="signedDocData.status === 'IN_PROCESS'">
                            <button mat-raised-button color="warn">{{'FORM.SIGNPROGRESSDOCUMENT' | translate}}</button>
                        </div>
                    </section>
                </section>
            </mat-card>
        </mat-tab>
        <mat-tab>
            <ng-template mat-tab-label>
                <span ngClass="exped-tab solicitud-tab">{{'APP.REQUEST' | translate}}</span>
            </ng-template>
            <mat-card ngClass="mat-card-solicitud">
                <section></section>
                <section>
                    <h4>Actos administrativos</h4>
                    <section *ngIf="signedDocData">{{signedDocData.status}}</section>
                    <ol>
                        <li>Requerimiento</li>
                        <li>Resolución desetimiento por no enmendar</li>
                    </ol>
                    <h4>Mejoras</h4>
                    <table></table>
                </section>
                <section>
                    <h4 [innerHTML]="'FORM.REQUESTDOCUMENTATION' | translate"></h4>
                    <app-document [idSol]="idExpediente" [requiredDocs]="'NO'" [faseExped]="'Solicitud'"></app-document>
                </section>
            </mat-card>
        </mat-tab>
        <mat-tab>
            <ng-template mat-tab-label>
                <span ngClass="exped-tab validacion-tab">{{'APP.VALIDATION' | translate}}</span>
            </ng-template>
            <mat-card ngClass="mat-card-validacion">
                <section></section>
                <section>
                    <h4>Actos administrativos</h4>
                    <ol start="3">
                        <li>Informe favorable</li>
                        <li>Informe favorable con requerimientos</li>
                        <li>Propuesta de resolución provisional</li>
                        <li>Propuesta de resolución provisional con requerimientos</li>
                        <li>Propuesta de resolución definitiva</li>
                        <li>Propuesta de resolución definitiva con requerimientos</li>
                        <li>Resolución de concesión</li>
                        <li>Resolución de concesión con requerimientos</li>
                    </ol>
                </section>
                <section>
                    <h4 [innerHTML]="'FORM.REQUESTDOCUMENTATION' | translate"></h4>
                    <app-document [idSol]="idExpediente" [requiredDocs]="'NO'" [faseExped]="'Validacion'"></app-document>
                </section>
            </mat-card>
        </mat-tab>
        <mat-tab>
            <ng-template mat-tab-label>
                <span ngClass="exped-tab justificacion-tab">{{'APP.JUSTIFICATION' | translate}}</span>
            </ng-template>
            <mat-card ngClass="mat-card-justificacion">
                <section></section>
                <section>
                    <h4>Actos administrativos</h4>
                    <ol start="11">
                        <li>Resolución de pago y justificación</li>
                    </ol>
                </section>
                <section>
                    <h4 [innerHTML]="'FORM.REQUESTDOCUMENTATION' | translate"></h4>
                    <app-document [idSol]="idExpediente" [requiredDocs]="'NO'" [faseExped]="'Justificacion'"></app-document>
                </section>
            </mat-card>
        </mat-tab>
        <mat-tab>
            <ng-template mat-tab-label>
                <span ngClass="exped-tab desestimiento-tab">{{'APP.DISCLAIMER' | translate}}</span>
            </ng-template>
            <mat-card ngClass="mat-card-desestimiento">
                <section>
                    <!-- <mat-form-field appearance="outline">
                        <mat-label>{{'' | translate}}</mat-label>
                        <input matInput type="" formControlName="" [readonly]="!isEditing">
                    </mat-form-field>
                    <mat-form-field appearance="outline">
                        <mat-label>{{'' | translate}}</mat-label>
                        <input matInput type="" formControlName="" [readonly]="!isEditing">
                    </mat-form-field>
                    <mat-form-field appearance="outline">
                        <mat-label>{{'' | translate}}</mat-label>
                        <input matInput type="" formControlName="" [readonly]="!isEditing">
                    </mat-form-field>
                    <mat-form-field appearance="outline">
                        <mat-label>{{'' | translate}}</mat-label>
                        <input matInput type="" formControlName="" [readonly]="!isEditing">
                    </mat-form-field>
                    <mat-form-field appearance="outline">
                        <mat-label>{{'' | translate}}</mat-label>
                        <input matInput type="" formControlName="" [readonly]="!isEditing">
                    </mat-form-field>
                    <mat-form-field appearance="outline">
                        <mat-label>{{'' | translate}}</mat-label>
                        <input matInput type="" formControlName="" [readonly]="!isEditing">
                    </mat-form-field>
                    <mat-form-field appearance="outline">
                        <mat-label>{{'' | translate}}</mat-label>
                        <input matInput type="" formControlName="" [readonly]="!isEditing">
                    </mat-form-field>
                    <mat-form-field appearance="outline">
                        <mat-label>{{'' | translate}}</mat-label>
                        <input matInput type="" formControlName="" [readonly]="!isEditing">
                    </mat-form-field> -->
                </section>
                <section>
                    <h4>Actos administrativos</h4>
                    <ol start="12">
                        <li>Resolución desestimiento por renuncia</li>
                        <li>Propuesta de resolución de revocación por no justificar</li>
                        <li>Resolución revocación por no justificar</li>
                    </ol>
                </section>
                <section>
                    <h4 [innerHTML]="'FORM.REQUESTDOCUMENTATION' | translate"></h4>
                    <app-document [idSol]="idExpediente" [requiredDocs]="'NO'" [faseExped]="'Desestimiento'"></app-document>
                </section>
            </mat-card>
        </mat-tab>
    </mat-tab-group>
    <section>
        <button mat-raised-button color="primary" type="submit" (click)="enableEdit()">Editar</button>
        <button mat-raised-button color="accent" (click)="saveExpediente()" [disabled]="!form.valid || !isEditing">Guardar</button>
    </section>
</form>