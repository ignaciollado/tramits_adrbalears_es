<section ngClass="logo-area">
    <a href="https://www.isbasgr.es/es/" target="_blank"><img src="/assets/images/logo-isba-sgr-317.png" alt="Logo de ISBA" width="30%"></a>
    <a href="https://www.adrbalears.es/es/" target="_blank" ngClass="adrLogo"><img src="/assets/ADRBalears-conselleria.jpg" alt="Logo de ADR Balears" width="60%"></a>
</section>
<section ngClass="info-header">
    <section>
        <h2>{{'ISBA.TITLE' | translate}}</h2>
        <p ngClass="banner"><strong>{{'ISBA.INFO.BANNER' | translate}}</strong></p>
    </section>
    <section ngClass="info">
        <dd>
            <dl [innerHTML]="'ISBA.INFO.DESTINATION' | translate"></dl>
            <dl [innerHTML]="'ISBA.INFO.EMITTER' | translate"></dl>
            <dl [innerHTML]="'ISBA.INFO.SIA-CODE' | translate"></dl>
            <dl [innerHTML]="'ISBA.INFO.PROCEDURE' | translate"></dl>
        </dd>
    </section>
</section>
<section>
    <form [formGroup]="isbaForm" ngClass="form" (ngSubmit)="onSubmit()">
        <div ngClass="example-action-buttons">
            <button matButton type="button" ngClass="btn-green btn" (click)="accordion().openAll()">{{'APP.EXPANDALL' | translate}}</button>
            <button matButton type="button" ngClass="btn-green btn" (click)="accordion().closeAll()">{{'APP.COLAPSEALL' | translate}}</button>
        </div>
        <mat-accordion ngClass="example-headers-align" multi>
            <!-- RGPD -->
            <mat-expansion-panel [expanded]="step() === 0" (opened)="setStep(0)">
                <mat-expansion-panel-header>
                    <mat-panel-title><h3>{{'FORM.RGPDTITLE' | translate}}</h3></mat-panel-title>
                    <mat-panel-description>{{'FORM.RGPDDESCRIPTION' | translate}} <mat-icon>policy</mat-icon></mat-panel-description>
                </mat-expansion-panel-header>
                <section>
                    <mat-checkbox formControlName="acceptRGPD">
                        <label>
                            {{'COMMON.RGPD-INFO.READ-AND-ACCEPTS.PART-1' | translate}}<abbr title="{{'COMMON.ACRONYMS.RGPD.FULL-PHRASE' | translate}}">{{'COMMON.ACRONYMS.RGPD.ACRONYM' | translate}}.</abbr><mat-icon data-icon="rgpd-icon" (click)="openDialog('300ms', '300ms', 'Sobre el RGPD', '../../../assets/data/clausulaProteccionDatos.html', '', '')">info</mat-icon>{{'COMMON.RGPD-INFO.READ-AND-ACCEPTS.PART-2' | translate}}<abbr title="{{'COMMON.ACRONYMS.ADR.FULL-PHRASE' | translate}}">{{'COMMON.ACRONYMS.ADR.ACRONYM' | translate}}</abbr>{{'COMMON.RGPD-INFO.READ-AND-ACCEPTS.PART-3' | translate}}<mat-icon data-icon="rgpd-info" (click)="openDialog('300ms', '300ms', 'Nuestra política de privacidad', '../../../assets/data/politica_privacidad.html', '', '')">info</mat-icon>
                        </label>
                    </mat-checkbox>
                    <section>
                        <p>{{'ISBA.REQUIREDDOCINFO' | translate}}</p>
                        <ol>
                            <li>{{'ISBA.REQUIREDDOC1' | translate}}</li>
                            <li>{{'ISBA.REQUIREDDOC2' | translate}}</li>
                            <li>{{'ISBA.REQUIREDDOC3' | translate}}</li>
                            <li>{{'ISBA.REQUIREDDOC4PART1' | translate}}<abbr title="{{'COMMON.ACRONYMS.BAT.FULL-PHRASE' | translate}}">{{'COMMON.ACRONYMS.BAT.ACRONYM' | translate}}</abbr>{{'ISBA.REQUIREDDOC4PART2' | translate}}</li>
                            <li>
                                {{'ISBA.REQUIREDDOC5INFO' | translate}}
                                <ol>
                                    <li type="a">{{'ISBA.REQUIREDDOC5DOC' | translate}}</li>
                                </ol>
                            </li>
                            <li>
                                {{'ISBA.REQUIREDDOC6INFO' | translate}}
                                <ol>
                                    <li type="a">{{'ISBA.REQUIREDDOC6DOC1' | translate}}</li>
                                    <li type="a">{{'ISBA.REQUIREDDOC6DOC2' | translate}}</li>
                                </ol>
                            </li>
                            <li>{{'ISBA.REQUIREDDOC7' | translate}}</li>
                            <li>{{'ISBA.REQUIREDDOC8PART1' | translate}}<abbr title="{{'COMMON.ACRONYMS.ATIB.FULL-PHRASE' | translate}}">{{'COMMON.ACRONYMS.ATIB.ACRONYM' | translate}}</abbr>{{'ISBA.REQUIREDDOC8PART2' | translate}}<abbr title="{{'COMMON.ACRONYMS.ADR.FULL-PHRASE' | translate}}">{{'COMMON.ACRONYMS.ADR.ACRONYM' | translate}}</abbr>{{'ISBA.REQUIREDDOC8PART3' | translate}}<abbr title="{{'COMMON.ACRONYMS.ATIB.FULL-PHRASE' | translate}}">{{'COMMON.ACRONYMS.ATIB.ACRONYM' | translate}}</abbr>{{'ISBA.REQUIREDDOC8PART4' | translate}}<abbr title="{{'COMMON.ACRONYMS.TGSS.FULL-PHRASE' | translate}}">{{'COMMON.ACRONYMS.TGSS.ACRONYM' | translate}}</abbr>{{'ISBA.REQUIREDDOC8PART5' | translate}}</li>
                            <li>{{'ISBA.REQUIREDDOC9' | translate}}</li>
                            <li>{{'ISBA.REQUIREDDOC10' | translate}}</li>
                            <li>{{'ISBA.REQUIREDDOC11' | translate}}</li>
                            <li>{{'ISBA.REQUIREDDOC12' | translate}}</li>
                            <li>{{'ISBA.REQUIREDDOC13' | translate}}</li>
                            <li>{{'ISBA.REQUIREDDOC14' | translate}}</li>
                        </ol>

                        <dl>
                            <dt>{{'ISBA.NOTIFICATIONINFO' | translate}}</dt>
                            <dd>{{'ISBA.NOTIFICATIONDOC1' | translate}}</dd>
                            <dd>{{'ISBA.NOTIFICATIONDOC2' | translate}}</dd>
                        </dl>
                    </section>
                </section>
            </mat-expansion-panel>

            <!-- Tipo Solicitante-->
            <mat-expansion-panel [disabled]="!rgpdAccepted" [expanded]="rgpdAccepted">
                <mat-expansion-panel-header>
                    <mat-panel-title><h3>{{'FORM.SOLICITORTYPE' | translate}}</h3></mat-panel-title>
                    <mat-panel-description>{{'FORM.ORGANIZATIONTYPE' | translate}} <mat-icon>corporate_fare</mat-icon></mat-panel-description>
                </mat-expansion-panel-header>
                <section ngClass="form applicant-type">
                    <section>
                        <mat-radio-group formControlName="tipo_solicitante" (ngModelChange)="onBusinessTypeChange()">
                            <mat-radio-button value="autonomo">{{'FORM.SELFEMPLOYEDBUSINESS' | translate}}</mat-radio-button>
                            <mat-radio-button value="pequenya">{{'FORM.SMALLBUSINESSNAME' | translate}}</mat-radio-button>
                            <mat-radio-button value="mediana">{{'FORM.MEDIUMBUSINESSNAME' | translate}}</mat-radio-button>
                        </mat-radio-group>
                    </section>
                    <section>
                        <p><strong>{{'FORM.SMALLBUSINESSNAME' | translate}}</strong>: {{'FORM.SMALLBUSINESSINFO' | translate}}</p>
                        <p><strong>{{'FORM.MEDIUMBUSINESSNAME' | translate}}</strong>: {{'FORM.MEDIUMBUSINESSINFO' | translate}}</p>
                    </section>
                </section>
            </mat-expansion-panel>

            <!-- Datos generales -->
            <mat-expansion-panel [disabled]="!rgpdAccepted" [expanded]="rgpdAccepted">
                <mat-expansion-panel-header>
                    <mat-panel-title><h3>{{'FORM.SOLICITOR' | translate}}</h3></mat-panel-title>
                    <mat-panel-description>{{'FORM.SOLICITORDETAILS' | translate}} <mat-icon>person</mat-icon></mat-panel-description>
                </mat-expansion-panel-header>
                <section ngClass="form personal-data">
                    <mat-form-field>
                        <mat-label *ngIf="businessType === 'autonomo'">{{'FORM.NIF' | translate}}</mat-label>
                        <mat-label *ngIf="businessType !== 'autonomo'">{{'FORM.CIF' | translate}}</mat-label>
                            <input matInput type="text" formControlName="nif" maxlength="9">
                            <mat-error *ngIf="isbaForm.get('nif')?.errors && businessType==='autonomo'">{{'FORMERRORS.COMMON.NIF' | translate}}</mat-error>
                            <mat-error *ngIf="isbaForm.get('nif')?.errors && businessType!=='autonomo'">{{'FORMERRORS.COMMON.CIF' | translate}}</mat-error>
                    </mat-form-field>
                    <mat-form-field>
                        <mat-label>{{'FORM.COMPANYNAME' | translate}}</mat-label>
                        <input matInput type="text" formControlName="empresa">
                        <mat-error *ngIf="isbaForm.get('empresa')?.errors" >{{'FORMERRORS.COMMON.COMPANYNAME' | translate}}</mat-error>
                    </mat-form-field>
                    <mat-form-field>
                        <mat-label>{{'FORM.ADDRESS' | translate}}</mat-label>
                        <input matInput type="text" formControlName="domicilio">
                        <mat-error *ngIf="isbaForm.get('domicilio')?.errors">{{'FORMERRORS.COMMON.ADDRESS' | translate}}</mat-error>
                    </mat-form-field>
                    <mat-form-field>
                        <mat-label>{{'FORM.ZIPCODE' | translate}}</mat-label>
                        <input matInput (ngModelChange)="selectedValue()" type="text" formControlName="cpostal" maxlength="5" minlength="5" [matAutocomplete]="auto" (blur)="cleanBlank($event)">
                        <mat-autocomplete #auto="matAutocomplete" [displayWith]="displayFn">
                            <mat-option *ngFor="let option of filteredOptions | async" [value]="option">{{option.zipCode}} {{option.town}}</mat-option> 
                        </mat-autocomplete>
                        <mat-error *ngIf="isbaForm.get('cpostal')?.errors">{{'FORMERRORS.COMMON.ZIPCODE' | translate}}</mat-error>
                    </mat-form-field>
                    <mat-form-field>
                        <mat-label>{{'FORM.TOWN' | translate}}</mat-label>
                        <input matInput formControlName="localidad" readonly>
                    </mat-form-field>
                    <mat-form-field>
                        <mat-label>{{'FORM.CONTACTPHONE' | translate}}</mat-label>
                        <input matInput type="tel" formControlName="telefono" (blur)="cleanBlank($event)" minlength="9" maxlength="9">
                        <mat-error *ngIf="isbaForm.get('telefono')?.errors">{{'FORMERRORS.COMMON.CONTACTPHONE' | translate}}</mat-error>
                    </mat-form-field>
                    <mat-form-field>
                        <mat-label>{{'FORM.SELECTIAE' | translate}}</mat-label>
                        <mat-select formControlName="iae">
                            <mat-option *ngFor="let actividad of actividadesCNAE" [value]="actividad.id">{{actividad.label_cas}}</mat-option>
                        </mat-select>
                        <mat-error *ngIf="isbaForm.get('iae')?.errors">{{'FORMERRORS.COMMON.CNAECODE' | translate}}</mat-error>
                    </mat-form-field>
                    <mat-form-field>
                        <mat-label>{{'FORM.NOMREPRESENTANTE' | translate}}</mat-label>
                        <input matInput type="text" formControlName="nombre_rep">
                        <mat-error *ngIf="isbaForm.get('nombre_rep')?.errors">{{'FORMERRORS.COMMON.NAMEREPRESENTANTE' | translate}}</mat-error>
                    </mat-form-field>
                    <mat-form-field>
                        <mat-label>{{'FORM.NIFREPRESENTANTE' | translate}}</mat-label>
                        <input matInput type="text" formControlName="nif_rep" maxlength="9" minlength="9">
                        <mat-error *ngIf="isbaForm.get('nif_rep')?.errors">{{'FORMERRORS.COMMON.NIFREPRESENTANTE' | translate}}</mat-error>
                    </mat-form-field>
                    <mat-form-field>
                        <mat-label>{{'ISBA.PHONEREPRESENTANTE' | translate}}</mat-label>
                        <input matInput type="tel" formControlName="telefono_contacto_rep" (blur)="cleanBlank($event)" maxlength="9" minlength="9">
                        <mat-error *ngIf="isbaForm.get('telefono_contacto_rep')?.errors">{{'FORMERRORS.COMMON.PHONEREPRESENTANTE' | translate}}</mat-error>
                    </mat-form-field>
                </section>
            </mat-expansion-panel>

            <!-- Canal de notificaciones -->
            <mat-expansion-panel [disabled]="!rgpdAccepted" [expanded]="rgpdAccepted">
                <mat-expansion-panel-header>
                    <mat-panel-title><h3>{{'FORM.NOTIFICATIONCHANEL' | translate}}</h3></mat-panel-title>
                    <mat-panel-description>{{'FORM.NOTIFICATIONCHANELDESCRIPTION' | translate}} <mat-icon>email</mat-icon></mat-panel-description>
                </mat-expansion-panel-header>
                <section ngClass="form notification-channel">
                    <section>
                        <p [innerHTML]="'FORM.NOTIFICATIONCHANELINFO' | translate"></p>
                    </section>
                    <section ngClass="inputs">
                        <mat-form-field>
                            <mat-label>{{'FORM.NOTIFICATIONMOBILE' | translate}}</mat-label>
                            <input matInput type="tel" maxlength="9" minlength="9" formControlName="telefono_rep" (blur)="cleanBlank($event)">
                            <mat-error *ngIf="isbaForm.get('telefono_rep')?.errors">{{'FORMERRORS.COMMON.NOTIFICATIONPHONE' | translate}}</mat-error>
                        </mat-form-field>
                        <mat-form-field>
                            <mat-label>{{'FORM.NOTIFICATIONMAIL' | translate}}</mat-label>
                            <input matInput type="email" formControlName="email_rep" (blur)="cleanBlank($event)">
                            <mat-error *ngIf="isbaForm.get('email_rep')?.errors">{{'FORMERRORS.COMMON.NOTIFICATIONEMAIL' | translate}}</mat-error>
                        </mat-form-field>
                    </section>
                </section>
            </mat-expansion-panel>

            <!-- Datos de la operación financiera -->
            <mat-expansion-panel [disabled]="!rgpdAccepted" [expanded]="rgpdAccepted">
                <mat-expansion-panel-header>
                    <mat-panel-title><h3>{{'ISBA.FINANCIALDATA' | translate}}</h3></mat-panel-title>
                    <mat-panel-description>{{'ISBA.FINANCIALDATADESCRIPTION' | translate}} <mat-icon>account_balance</mat-icon></mat-panel-description>
                </mat-expansion-panel-header>
                <section ngClass="form financial-data">
                <mat-form-field>
                    <mat-label>{{'ISBA.ENTITYNAME' | translate}}</mat-label>
                    <input matInput type="text" formControlName="nom_entidad">
                    <mat-error *ngIf="isbaForm.get('nom_entidad')?.errors">{{'FORMERRORS.ISBA.NOMBREENTIDAD' | translate}}</mat-error>
                </mat-form-field>
                <mat-form-field>
                    <mat-label>{{'ISBA.TRANSACTIONAMOUNT' | translate}}</mat-label>
                    <input matInput type="decimal" formControlName="importe_prestamo" min="1" (blur)="cleanBlank($event)">
                    <mat-error *ngIf="isbaForm.get('importe_prestamo')?.errors">{{'FORMERRORS.ISBA.IMPORTEFINANCIERO' | translate}}</mat-error>
                </mat-form-field>
                <mat-form-field>
                    <mat-label>{{'ISBA.LOANTERM' | translate}}</mat-label>
                    <input matInput type="number" min="1" formControlName="plazo_prestamo">
                    <mat-error *ngIf="isbaForm.get('plazo_prestamo')?.errors">{{'FORMERRORS.ISBA.PLAZOFINANCIERO' | translate}}</mat-error>
                </mat-form-field>
                <mat-form-field>
                    <mat-label>{{'ISBA.FORMALIZATIONDATE' | translate}}</mat-label>
                    <input matInput type="date" formControlName="fecha_aval_idi_isba">
                    <mat-error *ngIf="isbaForm.get('fecha_aval_idi_isba')?.errors">{{'FORMERRORS.ISBA.FORMALIZACIONAVAL' | translate}}</mat-error>
                </mat-form-field>
                <mat-form-field>
                    <mat-label>{{'ISBA.AVALTERM' | translate}}</mat-label>
                    <input matInput type="number" min="1" formControlName="plazo_aval_idi_isba">
                    <mat-error *ngIf="isbaForm.get('plazo_aval_idi_isba')?.errors">{{'FORMERRORS.ISBA.PLAZOAVAL' | translate}}</mat-error>
                </mat-form-field>
                <mat-form-field>
                    <mat-label>{{'ISBA.AVALAMOUNT' | translate}}</mat-label>
                    <input matInput type="decimal" formControlName="cuantia_aval_idi_isba" min="1" (blur)="cleanBlank($event)">
                    <mat-error *ngIf="isbaForm.get('cuantia_aval_idi_isba')?.errors">{{'FORMERRORS.ISBA.IMPORTEAVAL' | translate}}</mat-error>
                </mat-form-field>
                </section>
            </mat-expansion-panel>

            <!-- Proyecto de inversión y presupuesto -->
            <mat-expansion-panel [disabled]="!rgpdAccepted" [expanded]="rgpdAccepted">
                <mat-expansion-panel-header>
                    <mat-panel-title><h3>{{'ISBA.PROJECTBUDGET' | translate}}</h3></mat-panel-title>
                    <mat-panel-description>{{'ISBA.PROJECTBUDGETDESCRIPTION' | translate}} <mat-icon>request_quote</mat-icon></mat-panel-description>
                </mat-expansion-panel-header>
                <section ngClass="form project-budget">
                    <mat-form-field>
                        <mat-label>{{'ISBA.PROJECTPURPOSE' | translate}}</mat-label>
                        <input matInput type="text" formControlName="finalidad_inversion_idi_isba">
                        <mat-error *ngIf="isbaForm.get('finalidad_inversion_idi_isba')?.errors">{{'FORMERRORS.ISBA.PROPOSITOPROYECTO' | translate}}</mat-error>
                    </mat-form-field>
                    <section>
                        <mat-label>{{'ISBA.PROJECTINILS' | translate}}*</mat-label>
                        <section>
                            <mat-radio-group formControlName="empresa_eco_idi_isba">
                                <mat-radio-button value="NO">{{'APP.NO' | translate}}</mat-radio-button>
                                <mat-radio-button value="SI">{{'APP.YES' | translate}}</mat-radio-button>
                            </mat-radio-group>
                        </section>
                    </section>
                    <section ngClass="afterFormChange" *ngIf="isbaForm.get('empresa_eco_idi_isba')?.value === 'SI'">
                        <small>{{'ISBA.INILSYESINFO' | translate}}</small>
                    </section>
                    <mat-form-field>
                        <mat-label>{{'ISBA.BUDGETAMOUNT' | translate}}</mat-label>
                        <input matInput type="decimal" (blur)="cleanBlank($event)" min="0" formControlName="importe_presupuesto_idi_isba" (blur)="checkTotalAmount()">
                        <mat-error *ngIf="isbaForm.get('importe_presupuesto_idi_isba')?.errors">{{'FORMERRORS.ISBA.IMPORTEPRESUPUESTO' | translate}}</mat-error>
                    </mat-form-field>
                    <p><strong>{{'ISBA.BUDGETAMOUNTDETAILS' | translate}}</strong></p>
                    <mat-form-field>
                        <mat-label>{{'ISBA.INTERESTSUBSIDY' | translate}}</mat-label>
                        <input matInput type="decimal" (blur)="cleanBlank($event)" min="0" formControlName="intereses_ayuda_solicita_idi_isba" (blur)="checkTotalAmount()">
                        <mat-error *ngIf="isbaForm.get('intereses_ayuda_solicita_idi_isba')?.errors">{{((isbaForm.get('intereses_ayuda_solicita_idi_isba')?.hasError('notEqualError') ? 'FORMERRORS.ISBA.SUMASUBSNOIGUAL' : 'FORMERRORS.ISBA.SUBVENCIONES') | translate)}}</mat-error>
                    </mat-form-field>
                    <mat-form-field>
                        <mat-label>{{'ISBA.COSTSUBSIDY' | translate}}</mat-label>
                        <input matInput type="decimal" (blur)="cleanBlank($event)" min="0" formControlName="coste_aval_solicita_idi_isba" (blur)="checkTotalAmount()">
                        <mat-error *ngIf="isbaForm.get('coste_aval_solicita_idi_isba')?.errors">{{((isbaForm.get('coste_aval_solicita_idi_isba')?.hasError('notEqualError') ? 'FORMERRORS.ISBA.SUMASUBSNOIGUAL' : 'FORMERRORS.ISBA.SUBVENCIONES') | translate)}}</mat-error>                    </mat-form-field>
                    <mat-form-field>
                        <mat-label>{{'ISBA.STARTSTUDYSUBSIDY' | translate}}</mat-label>
                        <input matInput type="decimal" (blur)="cleanBlank($event)" min="0" formControlName="gastos_aval_solicita_idi_isba" (blur)="checkTotalAmount()">
                        <mat-error *ngIf="isbaForm.get('gastos_aval_solicita_idi_isba')?.errors">{{((isbaForm.get('gastos_aval_solicita_idi_isba')?.hasError('notEqualError') ? 'FORMERRORS.ISBA.SUMASUBSNOIGUAL' : 'FORMERRORS.ISBA.SUBVENCIONES') | translate)}}</mat-error>                    </mat-form-field>
                </section>
                <section style="padding-bottom: 1.1rem;">
                    <dl><h4>{{'ISBA.REQUESTTITLE' | translate}}</h4></dl>
                    <dt>{{'ISBA.REQUESTINFO' | translate}}</dt>
                </section>
                <section ngClass="form project-budget">
                    <mat-form-field>
                        <mat-label>{{'ISBA.REQUEST' | translate}}</mat-label>
                        <input matInput type="decimal" (blur)="cleanBlank($event); checkAmount()" min="0" formControlName="importe_ayuda_solicita_idi_isba">
                        <mat-error *ngIf="isbaForm.get('importe_ayuda_solicita_idi_isba')?.errors">{{'FORMERRORS.ISBA.SOLICITUDAYUDA' | translate}}</mat-error>
                    </mat-form-field>
                </section>
            </mat-expansion-panel>

            <!-- Declaracion responsable -->
            <mat-expansion-panel [disabled]="!rgpdAccepted" [expanded]="rgpdAccepted">
                <mat-expansion-panel-header>
                    <mat-panel-title><h3>{{'FORM.RESPONSIBLEDECLARATION' | translate}}</h3></mat-panel-title>
                    <mat-panel-description>{{'FORM.RESPONSIBLEDECLARATIONDESCRIPTION' | translate}} <mat-icon>menu_book</mat-icon></mat-panel-description>
                </mat-expansion-panel-header>
                <h4>{{'ISBA.DECLARATIONINFO' | translate}}</h4>
                <section ngClass="form declaration-checkboxes">
                    <mat-checkbox formControlName="declaro_idi_isba_que_cumple_0"><label>1. {{'ISBA.DECLARATION1' | translate}}</label></mat-checkbox>
                    <mat-checkbox formControlName="declaro_idi_isba_que_cumple_1"><label>2. {{'ISBA.DECLARATION2' | translate}}</label></mat-checkbox>
                    <mat-checkbox formControlName="declaro_idi_isba_que_cumple_2"><label>3. {{'ISBA.DECLARATION3' | translate}}</label></mat-checkbox>
                    <mat-checkbox formControlName="declaro_idi_isba_que_cumple_3"><label>4. {{'ISBA.DECLARATION4' | translate}}</label></mat-checkbox>
                    <mat-checkbox formControlName="declaro_idi_isba_que_cumple_4"><label>5. {{'ISBA.DECLARATION5' | translate}}</label></mat-checkbox>
                    <section ngClass="afterFormChange" *ngIf="!ayudasSubvenciones">
                        <mat-form-field>
                            <mat-label>{{'ISBA.DECLARATION5NO' | translate}}</mat-label>
                            <input matInput type="text" formControlName="ayudasSubvenSICuales_dec_resp">
                            <mat-error *ngIf="isbaForm.get('ayudasSubvenSICuales_dec_resp')?.errors">{{'FORMERRORS.ISBA.DECLARACION5' | translate}}</mat-error>
                        </mat-form-field>
                    </section>
                    <mat-checkbox formControlName="declaro_idi_isba_que_cumple_5"><label>6. {{'ISBA.DECLARATION6' | translate}}</label></mat-checkbox>
                    <mat-checkbox formControlName="declaro_idi_isba_que_cumple_7"><label>7. {{'ISBA.DECLARATION7' | translate}}</label></mat-checkbox>
                    <mat-checkbox formControlName="declaro_idi_isba_que_cumple_8"><label>8. {{'ISBA.DECLARATION8' | translate}}</label></mat-checkbox>
                    <mat-checkbox formControlName="declaro_idi_isba_que_cumple_10"><label>9. {{'ISBA.DECLARATION9' | translate}}</label></mat-checkbox>
                    <mat-checkbox formControlName="declaro_idi_isba_que_cumple_12"><label>10. {{'ISBA.DECLARATION10' | translate}}</label></mat-checkbox>
                    <mat-checkbox formControlName="declaro_idi_isba_que_cumple_13"><label>11. {{'ISBA.DECLARATION11' | translate}}</label></mat-checkbox>
                    <mat-checkbox formControlName="declaro_idi_isba_que_cumple_14"><label>12. {{'ISBA.DECLARATION12' | translate}}</label></mat-checkbox>
                    <mat-checkbox formControlName="declaro_idi_isba_que_cumple_15"><label>13. {{'ISBA.DECLARATION13' | translate}}</label></mat-checkbox>
                </section>
            </mat-expansion-panel>

             <!-- Documentación -->
            <mat-expansion-panel [disabled]="!rgpdAccepted" [expanded]="rgpdAccepted">
                <mat-expansion-panel-header>
                    <mat-panel-title><h3>{{'FORM.DOCUMENTATIONTITLE' | translate}}</h3></mat-panel-title>
                    <mat-panel-description>{{'FORM.DOCUMENTATIONDESCRIPTION' | translate}} <mat-icon>attachment</mat-icon></mat-panel-description>
                </mat-expansion-panel-header>
                <section>
                    <p [innerHTML]="'FORM.DOCUMENTATIONINFOFORMAT' | translate"></p>
                    <ol>
                        <li [innerHTML]="'FORM.DOCUMENTATIONINFOCTRL' | translate"></li>
                        <li [innerHTML]="'FORM.DOCUMENTATIONINFOSHIFT' | translate"></li>
                    </ol>
                </section>
                <section>
                    <section ngClass="form documentation">
                        <section ngClass="file-input">
                            <p>{{'ISBA.DOC1' | translate}}</p>
                        </section>
                        <section ngClass="file-input">
                            <mat-form-field floatLabel="always">
                                <mat-label>{{'ISBA.DOC2' | translate}}</mat-label>
                                <input 
                                matInput
                                type="text"
                                formControlName="file_memoriaTecnica"
                                readonly
                                [value]="fileNames['file_memoriaTecnica']"
                                (click)="file_memoriaTecnica.click()"
                                placeholder="{{'FILES.UPLOADFILES' | translate}}"
                                />
                                <mat-error *ngIf="isbaForm.get('file_memoriaTecnica')?.errors">{{'FORMERRORS.COMMON.FILE' | translate}}</mat-error>
                            </mat-form-field>
                            <input #file_memoriaTecnica type="file" (change)="onFileChange($event, 'file_memoriaTecnica')" hidden accept=".pdf, .jpeg, .png" multiple>
                            <ul *ngIf="files['file_memoriaTecnica'].length > 0">
                                <li *ngFor="let file of files['file_memoriaTecnica']">{{file.name}} {{file.size/1000}} KB</li>
                            </ul>
                            
                        </section>
                        <section ngClass="file-input">
                            <mat-form-field floatLabel="always">
                                <mat-label>{{'ISBA.DOC3' | translate}}</mat-label>
                                <input 
                                matInput
                                type="text"
                                formControlName="file_document_veracidad_datos_bancarios"
                                readonly
                                [value]="fileNames['file_document_veracidad_datos_bancarios']"
                                (click)="file_document_veracidad_datos_bancarios.click()"
                                placeholder="{{'FILES.UPLOADFILES' | translate}}"
                                />
                                <mat-error *ngIf="isbaForm.get('file_document_veracidad_datos_bancarios')?.errors">{{'FORMERRORS.COMMON.FILE' | translate}}</mat-error>
                            </mat-form-field>
                            <input #file_document_veracidad_datos_bancarios type="file" (change)="onFileChange($event, 'file_document_veracidad_datos_bancarios')" hidden accept=".pdf, .jpeg, .png" multiple>
                            <ul *ngIf="files['file_document_veracidad_datos_bancarios'].length > 0">
                                <li *ngFor="let file of files['file_document_veracidad_datos_bancarios']">{{file.name}} {{file.size/1000}} KB</li>
                            </ul>
                        </section>
                        <section ngClass="file-input">
                            <mat-form-field floatLabel="always">
                                <mat-label>{{'ISBA.DOC4' | translate}}</mat-label>
                                <input 
                                matInput
                                type="text"
                                formControlName="file_certificadoIAE"
                                readonly
                                [value]="fileNames['file_certificadoIAE']"
                                (click)="file_certificadoIAE.click()"
                                placeholder="{{'FILES.UPLOADFILES' | translate}}"
                                />
                                <mat-error *ngIf="isbaForm.get('file_certificadoIAE')?.errors">{{'FORMERRORS.COMMON.FILE' | translate}}</mat-error>
                            </mat-form-field>
                            <input #file_certificadoIAE type="file" (change)="onFileChange($event, 'file_certificadoIAE')" hidden accept=".pdf, .jpeg, .png" multiple>
                            <ul *ngIf="files['file_certificadoIAE'].length > 0">
                                <li *ngFor="let file of files['file_certificadoIAE']">{{file.name}} {{file.size/1000}} KB</li>
                            </ul>
                        </section>

                        <!-- Persona física -->
                        <section ngClass="file-input" *ngIf="businessType === 'autonomo'">
                            <p [innerHTML]="'ISBA.DOC5TITLE' | translate"></p>
                            <mat-form-field floatLabel="always">
                                <mat-label [innerHTML]="'ISBA.DOC5DOC' | translate"></mat-label>
                                <input 
                                matInput
                                type="text"
                                formControlName="file_altaAutonomos"
                                readonly
                                [value]="fileNames['file_altaAutonomos']"
                                (click)="file_altaAutonomos.click()"
                                placeholder="{{'FILES.UPLOADFILES' | translate}}"
                                />
                                <mat-error *ngIf="isbaForm.get('file_altaAutonomos')?.errors">{{'FORMERRORS.COMMON.FILE' | translate}}</mat-error>
                            </mat-form-field>
                            <input #file_altaAutonomos type="file" (change)="onFileChange($event, 'file_altaAutonomos')" hidden accept=".pdf, .jpeg, .png" multiple>
                            <ul *ngIf="files['file_altaAutonomos'].length > 0">
                                <li *ngFor="let file of files['file_altaAutonomos']">{{file.name}} {{file.size/1000}} KB</li>
                            </ul>
                        </section>

                        <!-- Persona jurídica -->
                        <section ngClass="file-input" *ngIf="businessType !== 'autonomo'">
                            <dl>
                                <dt [innerHTML]="'ISBA.DOC6TITLE' | translate"></dt>
                                <dd>{{'ISBA.DOC6DOC1' | translate}}</dd>
                                <dd>{{'ISBA.DOC6DOC2' | translate}}</dd>
                            </dl>
                            <mat-form-field floatLabel="always">
                                <mat-label [innerHTML]="'ISBA.DOC6LABEL' | translate"></mat-label>
                                <input 
                                matInput
                                type="text"
                                formControlName="file_escrituraConstitucion"
                                readonly
                                [value]="fileNames['file_escrituraConstitucion']"
                                (click)="file_escrituraConstitucion.click()"
                                placeholder="{{'FILES.UPLOADFILES' | translate}}"
                                />
                                <mat-error *ngIf="isbaForm.get('file_escrituraConstitucion')?.errors">{{'FORMERRORS.COMMON.FILE' | translate}}</mat-error>
                            </mat-form-field>
                            <input #file_escrituraConstitucion type="file" (change)="onFileChange($event, 'file_escrituraConstitucion')" hidden accept=".pdf, .jpeg, .png" multiple>
                            <ul *ngIf="files['file_escrituraConstitucion'].length > 0">
                                <li *ngFor="let file of files['file_escrituraConstitucion']">{{file.name}} {{file.size/1000}} KB</li>
                            </ul>
                        </section>

                        <section ngClass="file-input">
                            <p>{{'ISBA.DOC7INFO' | translate}}</p>
                            <mat-checkbox formControlName="dni_no_consent" style="padding-bottom: 10px;">
                                <label>{{'FILES.NOTAUTHORIZED' | translate}}</label>
                            </mat-checkbox>
                            <section ngClass="afterFormChange" *ngIf="dni_no_consent">
                                <mat-form-field floatLabel="always">
                                    <mat-label>{{'ISBA.DOC7LABEL' | translate}}</mat-label>
                                    <input 
                                    matInput
                                    type="text"
                                    formControlName="file_nifRepresentante"
                                    readonly
                                    [value]="fileNames['file_nifRepresentante']"
                                    (click)="file_nifRepresentante.click()"
                                    placeholder="{{'FILES.UPLOADFILES' | translate}}"
                                    />
                                    <mat-error *ngIf="isbaForm.get('file_nifRepresentante')?.errors">{{'FORMERRORS.COMMON.FILE' | translate}}</mat-error>
                                </mat-form-field>
                            </section>
                            <input #file_nifRepresentante type="file" (change)="onFileChange($event, 'file_nifRepresentante')" hidden accept=".pdf, .jpeg, .png" multiple>
                            <ul *ngIf="files['file_nifRepresentante'].length > 0">
                                <li *ngFor="let file of files['file_nifRepresentante']">{{file.name}} {{file.size/1000}} KB</li>
                            </ul>
                        </section>

                        <section ngClass="file-input">
                            <p>{{'ISBA.DOC8INFO' | translate}}</p>
                            <mat-checkbox formControlName="atib_no_consent" style="padding-bottom: 10px;">
                                <label>{{'FILES.NOTAUTHORIZED' | translate}}</label>
                            </mat-checkbox>
                            <section ngClass="afterFormChange" *ngIf="atib_no_consent">
                                <mat-form-field floatLabel="always">
                                    <mat-label>{{'ISBA.DOC8LABEL' | translate}}</mat-label>
                                    <input 
                                    matInput
                                    type="text"
                                    formControlName="file_certificadoATIB"
                                    readonly
                                    [value]="fileNames['file_certificadoATIB']"
                                    (click)="file_certificadoATIB.click()"
                                    placeholder="{{'FILES.UPLOADFILES' | translate}}"
                                    />
                                    <mat-error *ngIf="isbaForm.get('file_certificadoATIB')?.errors">{{'FORMERRORS.COMMON.FILE' | translate}}</mat-error>
                                </mat-form-field>
                            </section>
                            <input #file_certificadoATIB type="file" (change)="onFileChange($event, 'file_certificadoATIB')" hidden accept=".pdf, .jpeg, .png" multiple>
                            <ul *ngIf="files['file_certificadoATIB'].length > 0">
                                <li *ngFor="let file of files['file_certificadoATIB']">{{file.name}} {{file.size/1000}} KB</li>
                            </ul>
                        </section>
                        <section ngClass="file-input">
                            <mat-form-field floatLabel="always">
                                <mat-label>{{'ISBA.DOC9' | translate}}</mat-label>
                                <input 
                                matInput
                                type="text"
                                formControlName="file_certificadoAEAT"
                                readonly
                                [value]="fileNames['file_certificadoAEAT']"
                                (click)="file_certificadoAEAT.click()"
                                placeholder="{{'FILES.UPLOADFILES' | translate}}"
                                />
                                <mat-error *ngIf="isbaForm.get('file_certificadoAEAT')?.errors">{{'FORMERRORS.COMMON.FILE' | translate}}</mat-error>
                            </mat-form-field>
                            <input #file_certificadoAEAT type="file" (change)="onFileChange($event, 'file_certificadoAEAT')" hidden accept=".pdf, .jpeg, .png" multiple>
                            <ul *ngIf="files['file_certificadoAEAT'].length > 0">
                                <li *ngFor="let file of files['file_certificadoAEAT']">{{file.name}} {{file.size/1000}} KB</li>
                            </ul>
                        </section>
                        <section ngClass="file-input" *ngIf="isSubsidyGreater">
                            <mat-form-field floatLabel="always">
                                <mat-label>{{'ISBA.DOC10' | translate}}</mat-label>
                                <input 
                                matInput
                                type="text"
                                formControlName="file_certificadoLey382003"
                                readonly
                                [value]="fileNames['file_certificadoLey382003']"
                                (click)="file_certificadoLey382003.click()"
                                placeholder="{{'FILES.UPLOADFILES' | translate}}"
                                />
                                <mat-error *ngIf="isbaForm.get('file_certificadoLey382003')?.errors">{{'FORMERRORS.COMMON.FILE' | translate}}</mat-error>
                            </mat-form-field>
                            <input #file_certificadoLey382003 type="file" (change)="onFileChange($event, 'file_certificadoLey382003')" hidden accept=".pdf, .jpeg, .png" multiple>
                            <ul *ngIf="files['file_certificadoLey382003'].length > 0">
                                <li *ngFor="let file of files['file_certificadoLey382003']">{{file.name}} {{file.size/1000}} KB</li>
                            </ul>
                        </section>
                        <section ngClass="file-input">
                            <mat-form-field floatLabel="always">
                                <mat-label>{{'ISBA.DOC11' | translate}}</mat-label>
                                <input 
                                matInput
                                type="text"
                                formControlName="file_certificadoSGR"
                                readonly
                                [value]="fileNames['file_certificadoSGR']"
                                (click)="file_certificadoSGR.click()"
                                placeholder="{{'FILES.UPLOADFILES' | translate}}"
                                />
                                <mat-error *ngIf="isbaForm.get('file_certificadoSGR')?.errors">{{'FORMERRORS.COMMON.FILE' | translate}}</mat-error>
                            </mat-form-field>
                            <input #file_certificadoSGR type="file" (change)="onFileChange($event, 'file_certificadoSGR')" hidden accept=".pdf, .jpeg, .png" multiple>
                            <ul *ngIf="files['file_certificadoSGR'].length > 0">
                                <li *ngFor="let file of files['file_certificadoSGR']">{{file.name}} {{file.size/1000}} KB</li>
                            </ul>
                        </section>
                        <section ngClass="file-input">
                            <mat-form-field floatLabel="always">
                                <mat-label>{{'ISBA.DOC12' | translate}}</mat-label>
                                <input 
                                matInput
                                type="text"
                                formControlName="file_contratoOperFinanc"
                                readonly
                                [value]="fileNames['file_contratoOperFinanc']"
                                (click)="file_contratoOperFinanc.click()"
                                placeholder="{{'FILES.UPLOADFILES' | translate}}"
                                />
                                <mat-error *ngIf="isbaForm.get('file_contratoOperFinanc')?.errors">{{'FORMERRORS.COMMON.FILE' | translate}}</mat-error>
                            </mat-form-field>
                            <input #file_contratoOperFinanc type="file" (change)="onFileChange($event, 'file_contratoOperFinanc')" hidden accept=".pdf, .jpeg, .png" multiple>
                            <ul *ngIf="files['file_contratoOperFinanc'].length > 0">
                                <li *ngFor="let file of files['file_contratoOperFinanc']">{{file.name}} {{file.size/1000}} KB</li>
                            </ul>
                        </section>
                        <section ngClass="file-input">
                            <mat-form-field floatLabel="always">
                                <mat-label>{{'ISBA.DOC13' | translate}}</mat-label>
                                <input 
                                matInput
                                type="text"
                                readonly
                                [value]="fileNames['file_avalOperFinanc']"
                                (click)="file_avalOperFinanc.click()"
                                placeholder="{{'FILES.UPLOADFILES' | translate}}"
                                formControlName="file_avalOperFinanc"
                                />

                                <mat-error *ngIf="isbaForm.get('file_avalOperFinanc')?.errors">{{'FORMERRORS.COMMON.FILE' | translate}}</mat-error>
                            </mat-form-field>
                            <input #file_avalOperFinanc type="file" (change)="onFileChange($event, 'file_avalOperFinanc')" hidden accept=".pdf, .jpeg, .png" multiple>
                            <ul *ngIf="files['file_avalOperFinanc'].length > 0">
                                <li *ngFor="let file of files['file_avalOperFinanc']">{{file.name}} {{file.size/1000}} KB</li>
                            </ul>
                        </section>
                        <section ngClass="file-input">
                            <p>{{'ISBA.DOC14' | translate}}</p>
                        </section>
                    </section>
                </section>
            </mat-expansion-panel>
        </mat-accordion>
        <mat-form-field style="display: none">
            <input matInput type="text" formControlName="tipo_tramite">
        </mat-form-field>
        <button mat-raised-button color="primary" type="submit" [disabled]="isbaForm.invalid">{{'APP.SEND' | translate}}</button>
    </form>
</section>